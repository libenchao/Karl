# virtual functions
virtual 是C++中用来将函数声明为可能产生多态的形式。

virtual的作用就是使得对象中多了一个虚函数表，原来找函数都是直接根据静态类型就找了。但是有了virtual之后，就需要在运行时动态的在对象的虚函数表中找了，所以这时候就可以发生动态绑定了。

那么为什么构造函数不能使virtual的呢？原因是virtual是为了在运行时进行动态绑定的，而我们new一个class的时候，其实是一个静态过程，代码中就写好了。所以构造函数肯定不会在运行时动态决定，而是由静态编译就决定了。所以构造函数不可以是virtual的。

那么为什么基类的析构函数一定要是virtual的呢？原因是如果我们用一个基类的指针指向子类的对象，那么这时候如果delete掉该对象的时候，发现析构函数是一个正常的函数，那么就直接根据静态绑定，调用了子类的析构函数，从而子类的析构函数得不到调用了。而如果是virtual的呢，就可以通过虚函数表查找到子类的析构函数。

那么为什么正常的函数的virtual和析构函数的virtual的表现不一样呢？正常的函数只会直接调用子类的方法，而析构函数却会调用了子类的析构函数，再调用父类的构造函数。原因是构造函数和析构函数是特别的函数，编译器会把他们编译成函数链，其实说白了就是子类的构造函数一定会自动调用父类的构造函数，子类的析构函数也一定会调用父类的析构函数。而且是有顺序的，就是构造函数是先父类的再子类的；而析构函数是先子类的再父类的。所以virtual的析构函数和virtual的正常的函数之所以表现不一样是因为子类的析构函数会自动调用父类的析构函数，而不是由于virtual引起的，是析构函数自身就有这种特性。